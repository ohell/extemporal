<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_29) on Sun Jul 14 17:20:46 BST 2013 -->
<TITLE>
Engine
</TITLE>

<META NAME="date" CONTENT="2013-07-14">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Engine";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../net/extemporal/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../net/extemporal/Cryptologistics.html" title="class in net.extemporal"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../net/extemporal/Engine.ProcessingResult.html" title="enum in net.extemporal"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?net/extemporal/Engine.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Engine.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
net.extemporal</FONT>
<BR>
Class Engine</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../resources/inherit.gif" ALT="extended by "><B>net.extemporal.Engine</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>Engine</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
The main class that implements the secure message exchange scheme. Uses the <A HREF="../../net/extemporal/Platform.html" title="interface in net.extemporal"><CODE>Platform</CODE></A> object
 to execute storage/retrieval/transmission operations. The exchange is as follows: <br/>
 <br/>
 Alice calls sendMessage("Bob", msgData) to send a message to Bob. msgData is encrypted using the
 <A HREF="../../net/extemporal/Cryptologistics.html" title="class in net.extemporal"><CODE>Cryptologistics</CODE></A> class, and sent to Bob. <br/>
 Bob receives a message, and calls his <A HREF="../../net/extemporal/Engine.html" title="class in net.extemporal"><CODE>Engine</CODE></A>.processReceivedEnvelope("Alice", cipherData).
 This encrypts the cipher with Bob's key and sends it back to Alice (acknowledgement). <br/>
 Alice calls her calls his <A HREF="../../net/extemporal/Engine.html" title="class in net.extemporal"><CODE>Engine</CODE></A>.processReceivedEnvelope("Bob", ackData). This authenticates
 the sender, decrypts the received ackData, and sends to Bob (confirmation). <br/>
 Bob receives the confirmation, and calls his <A HREF="../../net/extemporal/Engine.html" title="class in net.extemporal"><CODE>Engine</CODE></A>.processReceivedEnvelope("Alice", confData). <br/>
 This authenticates the sender, decrypts the cipher with Bob's key and passes the resulting plaintext to its Platform.
 <br/> <br/>
 The randomly generated keys never leave Alice and Bob's respective possession, so an eavesdropper hasn't got anything
 to crack. Man-in-the-middle attack is a possibility, but only if the the attacker is able to impersonate
 Alice and Bob, and first completes the exchange with Bob and then exchanges the decrypted message with Alice. <br/>
 <br/>
 We guard against this by verifying a shared secret at both ends, to authenticate the parties. The insight is that
 the attacker has to complete the exchanges with Alice and Bob in sequence. So, we securely hash the shared secret
 with the times at which the message and its reply were generated. This is now secure, because attacker can't generate
 the secure hash without the secret, and can't use a previously observed hash because all the transmitted hashes are
 salted with message times, and we check that the times are in the expected order. <br/>
<P>

<P>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->

<A NAME="nested_class_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Nested Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../net/extemporal/Engine.ProcessingResult.html" title="enum in net.extemporal">Engine.ProcessingResult</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;byte[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../net/extemporal/Engine.html#envelopeHeader">envelopeHeader</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../net/extemporal/Engine.html#envelopeHeaderLengthBytes">envelopeHeaderLengthBytes</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../net/extemporal/Engine.html#envelopeVerifiedHeaderLengthBytes">envelopeVerifiedHeaderLengthBytes</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;byte</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../net/extemporal/Engine.html#flagAck">flagAck</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;byte</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../net/extemporal/Engine.html#flagCnf">flagCnf</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;byte</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../net/extemporal/Engine.html#flagMsg">flagMsg</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;byte</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../net/extemporal/Engine.html#version">version</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../net/extemporal/Engine.html#Engine(net.extemporal.Platform)">Engine</A></B>(<A HREF="../../net/extemporal/Platform.html" title="interface in net.extemporal">Platform</A>&nbsp;platform)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.nio.ByteBuffer</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../net/extemporal/Engine.html#envelopeMessage(java.lang.String, java.lang.Object, java.nio.ByteBuffer, int, java.lang.Integer)">envelopeMessage</A></B>(java.lang.String&nbsp;destination,
                java.lang.Object&nbsp;platformContext,
                java.nio.ByteBuffer&nbsp;message,
                int&nbsp;receivedTime,
                java.lang.Integer&nbsp;ackRef)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.nio.ByteBuffer</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../net/extemporal/Engine.html#generateTransmissionSecret(java.lang.String, java.lang.Object, int, int)">generateTransmissionSecret</A></B>(java.lang.String&nbsp;endpoint,
                           java.lang.Object&nbsp;platformContext,
                           int&nbsp;timeNow,
                           int&nbsp;theirTime)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../net/extemporal/Engine.ProcessingResult.html" title="enum in net.extemporal">Engine.ProcessingResult</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../net/extemporal/Engine.html#processReceivedEnvelope(java.lang.Object, java.lang.String, java.nio.ByteBuffer)">processReceivedEnvelope</A></B>(java.lang.Object&nbsp;platformContext,
                        java.lang.String&nbsp;destination,
                        java.nio.ByteBuffer&nbsp;message)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../net/extemporal/Engine.html#sendMessage(java.lang.Object, java.lang.String, java.nio.ByteBuffer)">sendMessage</A></B>(java.lang.Object&nbsp;platformContext,
            java.lang.String&nbsp;destination,
            java.nio.ByteBuffer&nbsp;message)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../net/extemporal/Engine.html#verifyTransmittedSecret(java.lang.String, java.lang.Object, java.nio.ByteBuffer, int)">verifyTransmittedSecret</A></B>(java.lang.String&nbsp;endpoint,
                        java.lang.Object&nbsp;platformContext,
                        java.nio.ByteBuffer&nbsp;secretData,
                        int&nbsp;keyTime)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="envelopeHeader"><!-- --></A><H3>
envelopeHeader</H3>
<PRE>
public static final byte[] <B>envelopeHeader</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="version"><!-- --></A><H3>
version</H3>
<PRE>
public static final byte <B>version</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../constant-values.html#net.extemporal.Engine.version">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="flagMsg"><!-- --></A><H3>
flagMsg</H3>
<PRE>
public static final byte <B>flagMsg</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../constant-values.html#net.extemporal.Engine.flagMsg">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="flagAck"><!-- --></A><H3>
flagAck</H3>
<PRE>
public static final byte <B>flagAck</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../constant-values.html#net.extemporal.Engine.flagAck">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="flagCnf"><!-- --></A><H3>
flagCnf</H3>
<PRE>
public static final byte <B>flagCnf</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../constant-values.html#net.extemporal.Engine.flagCnf">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="envelopeHeaderLengthBytes"><!-- --></A><H3>
envelopeHeaderLengthBytes</H3>
<PRE>
public static final int <B>envelopeHeaderLengthBytes</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="envelopeVerifiedHeaderLengthBytes"><!-- --></A><H3>
envelopeVerifiedHeaderLengthBytes</H3>
<PRE>
public static final int <B>envelopeVerifiedHeaderLengthBytes</B></PRE>
<DL>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="Engine(net.extemporal.Platform)"><!-- --></A><H3>
Engine</H3>
<PRE>
public <B>Engine</B>(<A HREF="../../net/extemporal/Platform.html" title="interface in net.extemporal">Platform</A>&nbsp;platform)</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="sendMessage(java.lang.Object, java.lang.String, java.nio.ByteBuffer)"><!-- --></A><H3>
sendMessage</H3>
<PRE>
public boolean <B>sendMessage</B>(java.lang.Object&nbsp;platformContext,
                           java.lang.String&nbsp;destination,
                           java.nio.ByteBuffer&nbsp;message)</PRE>
<DL>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>platformContext</CODE> - some platform-specific value that will be propagated to all further Platform calls
                           until this message is sent.<DD><CODE>destination</CODE> - message recipient. This value is also used to query the platform for shared secrets.<DD><CODE>message</CODE> - message content, plaintext.
<DT><B>Returns:</B><DD>whether the message was encrypted and transmitted OK.

 Call this method to start a the exchange for a new secure message.</DL>
</DD>
</DL>
<HR>

<A NAME="processReceivedEnvelope(java.lang.Object, java.lang.String, java.nio.ByteBuffer)"><!-- --></A><H3>
processReceivedEnvelope</H3>
<PRE>
public <A HREF="../../net/extemporal/Engine.ProcessingResult.html" title="enum in net.extemporal">Engine.ProcessingResult</A> <B>processReceivedEnvelope</B>(java.lang.Object&nbsp;platformContext,
                                                       java.lang.String&nbsp;destination,
                                                       java.nio.ByteBuffer&nbsp;message)</PRE>
<DL>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>platformContext</CODE> - some platform-specific value that will be propagated to all further Platform calls,
                           until this message is handled. Platform has a chance to modify it if required.<DD><CODE>destination</CODE> - message sender. This value is also used to query the platform for shared secrets.<DD><CODE>message</CODE> - message data, encrypted by the sender
<DT><B>Returns:</B><DD>the result of processing the message.

 Call this method whenever a new message is received. The message content is inspected for the our header to
 detect if this is of interest to us. If not, <A HREF="../../net/extemporal/Engine.ProcessingResult.html" title="enum in net.extemporal"><CODE>Engine.ProcessingResult</CODE></A>.Ignored is returned. Else appropriate
 processing is carried out as per the scheme describe above.

 If this message is a confirmation, it is finally decrypted and passed to the Platform via handleReceivedMessage()</DL>
</DD>
</DL>
<HR>

<A NAME="envelopeMessage(java.lang.String, java.lang.Object, java.nio.ByteBuffer, int, java.lang.Integer)"><!-- --></A><H3>
envelopeMessage</H3>
<PRE>
protected java.nio.ByteBuffer <B>envelopeMessage</B>(java.lang.String&nbsp;destination,
                                              java.lang.Object&nbsp;platformContext,
                                              java.nio.ByteBuffer&nbsp;message,
                                              int&nbsp;receivedTime,
                                              java.lang.Integer&nbsp;ackRef)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="generateTransmissionSecret(java.lang.String, java.lang.Object, int, int)"><!-- --></A><H3>
generateTransmissionSecret</H3>
<PRE>
protected java.nio.ByteBuffer <B>generateTransmissionSecret</B>(java.lang.String&nbsp;endpoint,
                                                         java.lang.Object&nbsp;platformContext,
                                                         int&nbsp;timeNow,
                                                         int&nbsp;theirTime)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="verifyTransmittedSecret(java.lang.String, java.lang.Object, java.nio.ByteBuffer, int)"><!-- --></A><H3>
verifyTransmittedSecret</H3>
<PRE>
protected int <B>verifyTransmittedSecret</B>(java.lang.String&nbsp;endpoint,
                                      java.lang.Object&nbsp;platformContext,
                                      java.nio.ByteBuffer&nbsp;secretData,
                                      int&nbsp;keyTime)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../net/extemporal/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../net/extemporal/Cryptologistics.html" title="class in net.extemporal"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../net/extemporal/Engine.ProcessingResult.html" title="enum in net.extemporal"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?net/extemporal/Engine.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Engine.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
